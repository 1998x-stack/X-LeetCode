[382. 链表随机节点](https://leetcode.cn/problems/linked-list-random-node)

[ChatGPT](https://chat.openai.com/share/4b34cb80-3a75-4c4b-baff-5aedfef087ec)

---

## 1. 问题的内容
**1.1 题目描述**：
LeetCode题目[382. 链表随机节点](https://leetcode.cn/problems/linked-list-random-node)要求设计一个算法，实现以下功能：

- 给定一个单向链表，选择链表中的一个随机节点的值并返回。每个节点被等概率选择。

**1.2 示例**：
假设链表有\[1,2,3\]三个元素：

- 初始化一个指向链表头部的对象（头部是1）。
- getRandom() 方法应当等概率地返回1, 2, 或3，这意味着每个元素应该有1/3的概率被返回。

**1.3 提示**:
- 链表的长度在\[1, 10000\]之间。
- 需要保证每个节点被等概率选中。

## 2. 边界情况和约束
**边界情况**:

- **链表长度为1**：此时，getRandom() 方法只能返回这一个元素。
- **链表长度接近10000**：算法需要高效处理大量的节点，保持时间和空间效率。

**约束**:

- 算法需要实现**等概率**选取节点，无论链表长度如何变化。
- 考虑到空间复杂度，尽量避免使用额外的存储空间来保存所有节点。


## 3. 算法和策略
1. **初始化**: 将链表头节点保存为成员变量。
2. **getRandom** 方法:
   1. 初始化计数器`i=1`（代表当前正在考虑链表中的第一个节点）。
   2. 初始化一个变量`chosenValue`，用于保存当前选中的节点值。
   3. 遍历链表。对于每个节点，生成一个从0到`i-1`的随机数`r`。
   4. 如果`r`等于0（这个概率是1/i），则将当前节点的值赋给`chosenValue`。
   5. `i`自增，并继续遍历直到链表结束。
   6. 返回`chosenValue`。

通过这种方式，我们可以保证每个节点的选中概率是等概率的。对于第`i`个元素，当它到达时，选择它的概率是1/i；对于它后面的每个元素，保持它的概率是通过乘以`(i/(i+1))`实现的，这正好抵消了它被选中的概率，从而保持总体的等概率。

---
