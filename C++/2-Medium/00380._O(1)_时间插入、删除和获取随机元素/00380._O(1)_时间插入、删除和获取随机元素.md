[380. O(1) 时间插入、删除和获取随机元素](https://leetcode.cn/problems/insert-delete-getrandom-o1)

[ChatGPT](https://chat.openai.com/share/f4c184fd-5ac9-4add-88bb-d00bad7caf48)

---

## 1. 问题的内容
**1.1 题目描述**：
LeetCode 380题目，"O(1) 时间插入、删除和获取随机元素"，要求设计一个数据结构，支持以下操作：

- `insert(val)`：向集合中插入一个项。如果元素已存在，不执行任何操作。
- `remove(val)`：从集合中删除一个项。如果元素不存在，不执行任何操作。
- `getRandom`：等概率随机返回集合中的一项。每个元素应该有相同的概率被返回。

**1.2 示例**：
- 输入
  - ["RandomizedSet", "insert", "remove", "insert", "getRandom", "remove", "insert", "getRandom"]
  - [[], [1], [2], [2], [], [1], [2], []]
- 输出
  - [null, true, false, true, 2, true, false, 2]

**1.3 提示**:
- 所有元素的值都是唯一的。
- 尝试以 O(1) 的时间复杂度实现每个操作。
- 可以假设所有操作的参数总是合法的（例如，不会尝试删除一个不存在的元素）。
- `getRandom` 操作需要等概率随机返回一个元素，这意味着每个元素被返回的概率都是相等的。

## 2. 边界情况和约束
### 边界情况：

- 集合为空时，`getRandom` 如何处理？
- 集合中只有一个元素时的处理。
- 连续插入或删除相同元素的情况。

### 约束：

- 所有操作的时间复杂度需为 O(1)。
- 元素的总数量不会超过数据类型的最大值范围。


## 3. 算法和策略
- **插入操作**：
  - 检查哈希表中是否已存在该元素，如果存在，直接返回 false；
  - 否则，将元素添加到数组的末尾，并在哈希表中记录该元素对应的索引；
  - 返回 true。
- **删除操作**：
  - 检查哈希表中是否存在该元素，如果不存在，直接返回 false；
  - 如果存在，首先获取该元素在数组中的索引；
  - 将数组最后一个元素移动到要删除元素的位置，并更新哈希表中的索引；
  - 删除数组最后一个元素，并从哈希表中移除该元素；
  - 返回 true。
- **获取随机元素**：
  - 随机生成一个索引，范围是 0 到数组长度减1；
  - 返回该索引对应的数组元素。

---
