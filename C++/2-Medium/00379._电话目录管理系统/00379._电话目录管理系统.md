[379. 电话目录管理系统](https://leetcode.cn/problems/design-phone-directory)

[ChatGPT](https://chat.openai.com/g/g-GsMNEr76r-c-master)

---

## 1. 问题的内容
**1.1 题目描述**：
设计一个电话目录管理系统，用来分配在某个范围内的未被使用的电话号码。当用户需要一个新的电话号码时，电话目录应该能够提供一个未被使用的最小号码。同样地，当一个电话号码不再被需要时，它应该被释放，可以再次被分配。

根据题目要求，需要实现以下功能：

- `PhoneDirectory(int maxNumbers)`：初始化电话目录，管理从0到maxNumbers - 1之间的电话号码。
- `int get()`：提供一个未被使用的电话号码，如果没有可用的电话号码，返回-1。
- `bool check(int number)`：检查特定的电话号码是否未被使用。
- `void release(int number)`：释放或回收一个电话号码，使其可以再次被分配。

**1.2 示例**：
假设电话目录管理的范围是0到2（即，maxNumbers = 3）。

- 初始时，所有号码都未被使用。
- `get()` 返回0，此时0被分配，不再可用。
- `get()` 返回1，此时1被分配，不再可用。
- `check(2)` 返回true，因为2号尚未分配。
- `get()` 返回2，此时2被分配，不再可用。
- `check(2)` 返回false，因为2号已经被分配。
- `release(2)`，2号被释放，可以再次被分配。
- `get()` 返回2，因为2号是最小的可再次分配的号码。

**1.3 提示**:
- 注意边界情况，例如号码池被完全分配后的行为。
- 考虑数据结构的选择，以支持高效的号码分配和释放操作。


## 2. 边界情况和约束

1. **边界情况**:
   - 当所有电话号码都被分配时，`get()`应返回-1。
   - 当释放一个已经是空闲状态的号码时，需要确保系统状态不变，即不允许重复释放同一个号码。
   - 当请求释放或检查一个超出初始化范围的号码时，应如何处理是一个设计上的考虑（例如返回错误信息或忽略）。

2. **约束**:
   - `maxNumbers`的范围和合法性，需要保证初始化时`maxNumbers`大于0。
   - 对于`check(int number)`和`release(int number)`方法，传入的号码必须在初始化时确定的范围内。
   - 保证`get()`, `check()`, 和`release()`方法的时间复杂度尽可能低，以支持高效操作。


## 3. 算法和策略
#### 算法设计：

1. **数据结构选择**:
   - 使用一个`set`或`unordered_set`来存储未被使用的电话号码。这样可以快速检查一个号码是否可用，并且快速插入和删除号码。
   - 另一个选择是使用`queue`或`stack`来存储未被使用的电话号码，当需要分配号码时，直接从`queue`或`stack`中取出一个号码。这样做的缺点是不能直接检查某个特定号码是否被使用（需要额外数据结构支持）。

2. **初始化**(`PhoneDirectory(int maxNumbers)`):
   - 遍历从0到`maxNumbers-1`的所有号码，将它们添加到未被使用的电话号码集合中。

3. **获取电话号码**(`int get()`):
   - 如果未被使用的电话号码集合不为空，从集合中移除并返回一个号码。
   - 如果集合为空，返回-1。

4. **检查电话号码**(`bool check(int number)`):
   - 检查给定的号码是否在未被使用的电话号码集合中。

5. **释放电话号码**(`void release(int number)`):
   - 将给定的号码添加到未被使用的电话号码集合中。

#### 策略细节：

- **高效操作**：使用`unordered_set`来存储未使用的号码可以保证`get()`，`check()`，和`release()`操作的平均时间复杂度为O(1)。
- **避免重复释放**：在`release()`操作前检查号码是否已经在未使用的集合中，以避免重复添加。

---