[552. 学生出勤记录 II](https://leetcode.cn/problems/student-attendance-record-ii)

[ChatGPT](https://chat.openai.com/share/f11cf0b6-2897-44c2-89d3-60850b02dd4d)

---

## 1. 问题的内容
**1.1 题目描述**：

- **题目链接**：[552. 学生出勤记录 II](https://leetcode.cn/problems/student-attendance-record-ii)
- **题目描述**：给定一个整数 `n`，返回可以被认为是奖励的出勤记录的数量。记录仅由以下三个字符组成：
  - **'A'**：Absent，缺勤
  - **'L'**：Late，迟到
  - **'P'**：Present，出席
- **条件**：
  - 出勤记录不包含 **超过一个** 'A'（缺勤）
  - 出勤记录不包含 **连续三个或三个以上**的 'L'（迟到）

**1.2 示例**：
- **输入**：`n = 2`
- **输出**：`8`
- **解释**：存在8种可能的记录："PP" , "AP", "PA", "LP", "PL", "AL", "LA", "LL" 只有"AA"不被允许。

**1.3 提示**:
- 动态规划是解决这类问题的一个常用方法。
- 考虑如何利用前一天或前几天的出勤记录来推断当前天的出勤记录情况。

这个问题是一个典型的计数问题，其解决方案需要考虑所有可能的出勤记录组合，并确保这些组合满足给定的缺勤和迟到条件。由于可能的出勤记录数量随着天数的增加而指数增长，简单的枚举方法在时间上是不可行的。因此，我们需要寻找一种有效的算法，通过避免重复计算来优化问题的解决方案。动态规划提供了一种将问题分解成更小、更易于管理的子问题的方法，通过解决这些子问题并利用它们的解来构建原问题的解，从而实现高效计算。

## 2. 边界情况和约束
#### 边界情况

- **n = 0**：没有天数时，应该返回1，因为没有任何记录意味着满足条件。
- **n = 1**：只有一天时，可能的出勤记录有3种（'A', 'L', 'P'）。
- **n较大时**：解决方案必须在合理的时间内完成计算，这要求算法具有较高的效率。

#### 约束条件

- **时间复杂度**：考虑到n的大小，算法的时间复杂度应尽可能低。
- **空间复杂度**：优化空间使用，特别是在处理大量数据时。


## 3. 算法和策略

1. **状态定义**：定义动态规划数组 `dp[i][j][k]`，其中 `i` 表示天数，`j` 表示'A'（缺勤）的数量（0或1），`k` 表示结尾连续'L'（迟到）的天数（0、1或2）。

2. **状态转移**：
   - **考虑 'P'（出席）**：`dp[i][j][0] += dp[i-1][j][k]`，对于所有 `k`，因为新的一天出席不会影响缺勤天数和结尾连续迟到天数归零。
   - **考虑 'A'（缺勤）**：`dp[i][1][0] += sum(dp[i-1][0][k])`，对于所有 `k`，因为新的一天缺勤，缺勤天数从0变为1，结尾连续迟到天数归零。
   - **考虑 'L'（迟到）**：`dp[i][j][k] += dp[i-1][j][k-1]`，对于 `k` > 0，因为新的一天迟到，结尾连续迟到天数增加。

3. **初始化**：
   - 第一天，只有3种情况：'P', 'A', 'L'。
   - `dp[1][0][0] = 1`，出席。
   - `dp[1][1][0] = 1`，缺勤。
   - `dp[1][0][1] = 1`，迟到。

4. **结果**：求所有 `dp[n][j][k]` 的和，即为所求。

---

