[488. 祖玛游戏](https://leetcode.cn/problems/zuma-game)

[ChatGPT](https://chat.openai.com/share/52cae86c-728e-4976-82f5-da612662e114)

---

## 1. 问题的内容
**1.1 题目描述**：
祖玛游戏是一种流行的益智游戏，其中玩家尝试通过形成由三个或更多相同颜色的球组成的连续序列来消除球。给定一个表示球序列的字符串和一个包含玩家手中球的字符串，要求编写一个程序来找出玩家至少需要投掷多少次球才能清空板上的所有球。
- **输入**:
  - **板上的球序列**: 由不同颜色的球组成的字符串，每种颜色由一个字母表示。
  - **玩家手中的球**: 包含可以投掷以清除板上球的球，同样由颜色字母表示。
- **输出**: 最少需要的投掷次数来清空板上的所有球。如果无法清空，则返回 -1。

**1.2 示例**：
假设板上的球序列为 "WRRBBW"，玩家手中的球为 "RB"，一个可能的投掷序列是将 R 球投掷到第一个位置，然后板上的球变为 "RWRRBBW"，接着再投掷 B 球到第四个位置，序列变为 "RWRRBRBBW"，通过一系列的消除，最终可以清空板上的所有球。


**1.3 提示**:
- 深度优先搜索（DFS）可以用来探索所有可能的投掷组合。
- 回溯算法可以帮助在尝试了一个投掷序列后撤回到前一个状态，以尝试不同的序列。

## 2. 边界情况和约束
#### 边界情况:
- **空的球序列**: 如果板上开始就没有球，那么不需要任何投掷。
- **无法清空的序列**: 如果玩家手中的球无法组合出足够的连续序列来清空板上的球，则返回 -1。
- **极少数球的情况**: 玩家手中的球数量非常少，可能只有一种颜色。

#### 约束:
- 球的颜色数量是有限的，通常用大写字母表示。
- 投掷次数应该尽可能少。
- 在任何时候，如果形成了三个或更多相同颜色的连续球，则这些球会被消除。


## 3. 算法和策略

#### 算法设计:
1. **初始化**:
   - 创建一个用于存储最少投掷次数的变量，初始值设为无穷大。
   - 定义一个深度优先搜索函数，用于探索所有可能的投掷组合。

2. **深度优先搜索（DFS）**:
   - 对于每一次DFS调用，遍历玩家手中的所有球。
   - 尝试将每一种颜色的球投掷到板上的所有可能位置。
   - 在每次投掷后，检查是否可以消除球，并递归调用DFS来处理剩下的球。
   - 更新最少投掷次数的变量，如果当前序列的消除需要更少的投掷。

3. **剪枝**:
   - 如果当前递归深度已经超过了已知的最少投掷次数，则停止递归，以减少不必要的计算。

4. **回溯**:
   - 在每次递归调用后，撤销上一次的投掷操作，以尝试不同的投掷组合。

5. **终止条件**:
   - 如果板上的球被清空，记录当前的投掷次数，并与已知的最少投掷次数进行比较和更新。

#### 策略优化:
- **预处理**:
  - 在开始搜索之前，可以对板上的球序列进行预处理，合并连续的相同颜色球，以减少搜索空间。
- **记忆化搜索**:
  - 使用哈希表存储已经计算过的状态和它们的最少投掷次数，以避免重复计算。
---