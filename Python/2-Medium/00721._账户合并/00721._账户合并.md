[721. 账户合并](https://leetcode.cn/problems/accounts-merge)

[ChatGPT](chat.openai.com)

---

## 1. 问题的内容
**1.1 题目描述**：
题目要求合并电子邮件账户。如果多个账户拥有相同的电子邮件地址，它们必须被视为同一个人的账户。每个账户由一个名字和多个电子邮件地址组成，电子邮件地址列表可以不唯一。合并后的账户应包括所有独特的电子邮件地址，并且电子邮件地址应按字典序排序。

**1.2 示例**：
**输入**:
```plaintext
[
  ["John", "johnsmith@mail.com", "john_newyork@mail.com"],
  ["John", "johnsmith@mail.com", "john00@mail.com"],
  ["Mary", "mary@mail.com"],
  ["John", "johnnybravo@mail.com"]
]
```
**输出**:
```plaintext
[
  ["John", "john00@mail.com", "john_newyork@mail.com", "johnsmith@mail.com"],
  ["Mary", "mary@mail.com"],
  ["John", "johnnybravo@mail.com"]
]
```
**解释**:
第一组和第二组是同一个人，因为有共同的电子邮件地址 "johnsmith@mail.com"。

**1.3 提示**:
- 用户的名字相同不代表是同一个人，关键是看电子邮件地址。
- 不需要担心电子邮件地址或名字的大小写问题，因为输入保证是规范的。
- 每个账户至少有一个电子邮件地址。

## 2. 边界情况和约束
### 边界情况
1. 只有一个账户，没有重复，应当直接返回。
2. 所有账户都是同一个人的，应合并成一个账户。
3. 没有任何账户，应返回空列表。
4. 账户中的电子邮件地址完全重复，应只保留一个副本并排序。

### 约束
- 输入账户数至少为 1。
- 每个账户的电子邮件地址数量至少为 1。
- 电子邮件地址不考虑大小写问题。
- 输出中每个账户名字后跟随的电子邮件地址需要按字典序排列。

## 3. 算法和策略
### 算法思路
由于需要合并具有共同电子邮件的账户，可以采用图的连通分量或并查集的方法来解决：
1. **建立映射**：使用字典来映射电子邮件和账户索引。
2. **建立并查集**：并查集用来快速查询和合并属于同一用户的不同账户。
3. **合并账户**：通过并查集，将拥有共同电子邮件的账户进行合并。
4. **提取结果**：根据并查集的结果提取合并后的账户信息，确保电子邮件排序。

### 具体步骤
1. 遍历所有账户，为每个电子邮件分配一个唯一的数字ID，并使用并查集管理这些ID。
2. 对于每个账户中的电子邮件，通过并查集将它们与账户的第一个电子邮件合并。
3. 最后，遍历并查集，对于每个根节点，收集所有与之连接的电子邮件，排序并输出。

---