[314. 二叉树的垂直遍历](https://leetcode.cn/problems/binary-tree-vertical-order-traversal)

[ChatGPT](https://chat.openai.com/share/adc256c4-9072-492c-902b-d873b65bf890)

---

## 1. 问题的内容
**1.1 题目描述**：
- **问题内容**：给定一个二叉树，要求按照垂直遍历的顺序返回它的节点值。垂直遍历是指，从左到右按照节点的垂直位置进行排序，如果两个节点的位置相同，则按照它们在树中的深度顺序排序（即从上到下）。

**1.2 示例**：
  - 输入：一个二叉树
  - 输出：垂直遍历的节点值列表

**1.3 提示**:
  - 可以使用广度优先搜索（BFS）来遍历树，并记录每个节点的位置（列号和行号）。
  - 使用哈希表来根据列号聚合节点值，同时保持记录它们的行号以进行排序。

## 2. 边界情况和约束
- **边界情况**：
  - 树为空时，应返回空列表。
  - 树只有一个节点时，直接返回该节点值。
  
- **约束**：
  - 需要考虑节点值可能相同，但位置不同的情况。
  - 确保遍历时能够区分同一列但不同行的节点。

## 3. 算法和策略
1. **初始化**：
   - 创建一个哈希表 `columns`，用于存储列号和对应的节点值及其深度。
   - 创建一个队列 `queue`，用于广度优先搜索，元素为一个三元组（当前节点，列号，行号）。

2. **广度优先搜索（BFS）**：
   - 将根节点及其位置信息（列号：0，行号：0）加入队列。
   - 当队列不为空时，循环执行以下操作：
     - 从队列中取出一个元素（当前节点，当前列号，当前行号）。
     - 将当前节点的值及其行号添加到对应列号的列表中。
     - 如果当前节点有左子节点，将左子节点及其位置信息（当前列号-1，当前行号+1）加入队列。
     - 如果当前节点有右子节点，将右子节点及其位置信息（当前列号+1，当前行号+1）加入队列。

3. **整理结果**：
   - 对 `columns` 中的每个条目按照列号排序。
   - 对每个列中的节点按照行号排序（如果行号相同，则按照节点值排序）。
   - 提取排序后的节点值，形成最终结果。

---