[134. 加油站](https://leetcode.cn/problems/gas-station)

[ChatGPT](https://chat.openai.com/share/5b006407-50c1-4f00-b023-b7fd791a10c4)

---

## 1. 问题的内容
**1.1 题目描述**：
题目链接: [134. 加油站](https://leetcode.cn/problems/gas-station)

在一条环路上有 N 个加油站，其中第 i 个加油站有汽油 gas[i] 升。你有一辆油箱无限大的车，从第 i 个加油站驶往第 i+1 个加油站需要消耗油 cost[i] 升。你从其中的一个加油站出发，开始时油箱为空。

要求是能够绕环路一周，则返回出发加油站的索引，如果不存在则返回 -1。

**1.2 示例**：
- **示例1**:
  输入: 
  gas  = [1,2,3,4,5]
  cost = [3,4,5,1,2]

  输出: 3

  解释:
  从第 3 个站点出发 (索引为 3)，可以收集 4+5+1+2=12 升油。
  使用 1+2+3=6 升油，可以到达下一个站点。剩余油为 6 升。
  因此，可以绕环路一周，返回出发点 3 的索引。

- **示例2**:
  输入: 
  gas  = [2,3,4]
  cost = [3,4,3]

  输出: -1

**1.3 提示**:
- gas 和 cost 的长度相同，且长度范围在 [1, 10000]。
- gas[i] 和 cost[i] 的范围在 [0, 9999]。

## 2. 边界情况和约束
1. **所有加油站的总油量小于总耗油量**:
   - 如果所有加油站提供的油量之和小于从一个加油站到下一个所需的总油量，那么车辆无法完成全程。这是一个关键的边界情况，它直接指向无解的情况，即应返回 -1。

2. **单个加油站的油量超过总耗油量**:
   - 如果存在一个加油站，其提供的油量比整个环路的总耗油量还要多，那么从该加油站出发就可以完成整个环路。这种情况很少见，但理论上是可能的，特别是在问题的边界条件下。

3. **加油站数量为1**:
   - 当只有一个加油站时，如果该加油站的油量大于或等于从这个加油站出发到达自己的耗油量，那么它就是解。否则，无法绕环路行驶。

4. **加油站和耗油量完全匹配**:
   - 如果每个加油站提供的油量刚好等于到下一个加油站的耗油量，这种情况下，任何加油站都可以作为起点。

5. **连续子数组的总油量不足以覆盖对应的总耗油量**:
   - 在环形路线中，如果存在一段连续的加油站子序列，其总油量不足以覆盖这一段路线的总耗油量，那么起点必定不在这个子序列内。

考虑到这些边界情况和约束，接下来我们将设计一个算法，不仅能处理正常情况，还能有效地处理这些特殊情况。这将涉及到综合考虑油量和耗油量，以及如何有效地遍历加油站以找到一个可行的起点。

## 3. 算法和策略
为了解决这个问题，我们可以采用一种贪心策略。基本思路是遍历每个加油站，尝试从每个点出发，检查是否能够回到起点。但这种方法的时间复杂度较高。一个更高效的策略是，一旦发现从某个加油站开始无法到达下一个加油站，就跳过这一段，从无法到达的加油站的下一个站开始尝试，因为如果这段路程无法完成，那么这段路程的任何加油站作为起点都不可能完成整个环路。

具体算法步骤如下：

1. **初始化**:
   - 设置两个变量，`total_tank` 记录从起点开始的总油量减去总耗油量，`curr_tank` 记录从当前出发点开始的油量减去耗油量。
   - 设置一个变量 `start_station` 作为可能的出发点，初始化为0。

2. **遍历加油站**:
   - 遍历所有加油站，对于每个加油站：
     - 更新 `curr_tank` 和 `total_tank`。
     - 如果 `curr_tank` 变为负数，说明从 `start_station` 到当前加油站的某个点无法到达，将 `start_station` 设置为当前加油站的下一个站点，并将 `curr_tank` 重置为0。

3. **检查总油量**:
   - 遍历结束后，如果 `total_tank` 至少为0，这意味着存在一个解，即 `start_station`。否则，返回 -1 表示无解。

#### 策略优化

- **一次遍历**:
  - 通过只遍历一次加油站来优化算法，既能找出起点也能判断是否有解，这是因为如果总油量大于等于总耗油量，那么一定存在解。

- **空间优化**:
  - 无需使用额外的数组来存储每个加油站的净油量（即油量减去耗油量），可以直接在遍历过程中计算。

---