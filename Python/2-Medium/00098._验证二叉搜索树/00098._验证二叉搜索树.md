[98. 验证二叉搜索树](https://leetcode.cn/problems/validate-binary-search-tree)

[ChatGPT](https://chat.openai.com/share/e1e69139-c297-434e-9f40-ef57f7eb11b7)

---

## 1. 问题的内容
**1.1 题目描述**：
验证给定的二叉树是否是二叉搜索树（BST）。二叉搜索树的定义是：对于任意节点，其左子树中的所有节点的值都小于当前节点的值，其右子树中的所有节点的值都大于当前节点的值。二叉树的每个节点最多有两个子节点。

**1.2 示例**：
1. 输入：一个二叉树，其中节点分别为 `[2,1,3]`，这是一个二叉搜索树，因为根节点的值为 2，左子节点的值为 1（小于 2），右子节点的值为 3（大于 2）。
   
2. 输入：一个二叉树，其中节点分别为 `[5,1,4,null,null,3,6]`，这不是一个二叉搜索树，因为节点 4 的左子节点的值为 3，违反了二叉搜索树的定义。


**1.3 提示**:
- 考虑使用递归或迭代的方法来遍历树。
- 注意二叉搜索树的定义，尤其是对节点值的大小限制。
- 考虑使用额外的参数记录上下界限，以确保节点的值在正确的范围内。

## 2. 边界情况和约束
- **空树**：一个空树被认为是有效的二叉搜索树。
- **单节点树**：只有一个节点的树也是有效的二叉搜索树。
- **重复值**：二叉搜索树不允许有重复值。
- **极值**：需要注意处理包含Python整数极值（如`float('inf')`和`float('-inf')`）的树。


## 3. 算法和策略

设计算法前，我们首先要确立几个关键点：

1. **递归遍历**：通过递归方法遍历树的每一个节点，同时检查每个节点是否满足二叉搜索树的条件。
   
2. **维护上下界**：在递归过程中，为每个节点维护一个值的上界和下界，以确保当前节点的值在这个范围内。初始时，根节点的值没有上下界。

3. **递归定义**：
   - 对于每个节点，如果它是左子节点，则它的值必须小于其父节点的值，并且大于从根节点到其父节点路径上所有右子节点的值。
   - 对于每个节点，如果它是右子节点，则它的值必须大于其父节点的值，并且小于从根节点到其父节点路径上所有左子节点的值。

### 算法步骤：

1. **递归函数定义**：定义一个递归函数，该函数接收当前节点、当前值的上界和下界作为参数。
   
2. **递归终止条件**：如果当前节点为空，返回True，因为空节点不违反BST的规则。

3. **检查当前节点值**：检查当前节点的值是否在它的上下界内，如果不在，则返回False。

4. **递归左右子树**：对于当前节点的左子节点，将当前节点的值作为新的上界；对于当前节点的右子节点，将当前节点的值作为新的下界，并递归调用。

5. **返回值**：如果左右子树的递归调用都返回True，则当前子树满足BST的条件，返回True；否则，返回False。

---

