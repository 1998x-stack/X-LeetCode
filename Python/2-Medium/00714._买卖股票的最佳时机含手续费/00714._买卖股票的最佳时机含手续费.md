[714. 买卖股票的最佳时机含手续费](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee)

[ChatGPT](https://chat.openai.com/share/6cc28ca3-c34c-4f75-8ad0-31bb4f18dd27)

---

## 1. 问题的内容
**1.1 题目描述**：
LeetCode 714题目要求设计一个算法来计算买卖股票能达到的最大利润，考虑到每次交易都需要支付固定费用。可以多次买卖一支股票，但是每次卖出时都要支付交易费用。如果你不能获取任何利润，返回 0。

**1.2 示例**：
例如，股票价格为 `[1, 3, 2, 8, 4, 9]`，手续费为 `2`。最优策略是在价格为 1 时买入，在价格为 8 时卖出，这次操作利润为 8 - 1 - 2 = 5。再在价格为 4 时买入，在价格为 9 时卖出，这次操作利润为 9 - 4 - 2 = 3。总利润为 5 + 3 = 8。

**1.3 提示**:

## 2. 边界情况和约束
#### 边界情况
1. 股票价格数组为空。
2. 股票价格数组只有一个元素，不足以完成任何交易。
3. 手续费大于或等于某次交易可能的最大利润，此时应避免交易。

#### 约束条件
- 数组中的所有元素都是正整数。
- 手续费是一个非负整数。

## 3. 算法和策略
#### 算法设计
使用动态规划策略：
- 维护两个状态变量 `cash` 和 `hold`：
  - `cash` 表示不持有股票时的最大利润。
  - `hold` 表示持有股票时的最大利润。
- 对于每个价格 `p`：
  - 更新 `cash` 为 `max(cash, hold + p - fee)`，即不持有股票的最大利润。
  - 更新 `hold` 为 `max(hold, cash - p)`，即持有股票的最大利润。

#### 策略讨论
动态规划的方法允许在遍历价格数组的同时逐步构建最优解，每一步都基于前一步的结果。这样可以避免重复计算，并实时更新最优利润状态。

---