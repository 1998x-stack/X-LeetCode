[369. 给单链表加一](https://leetcode.cn/problems/plus-one-linked-list)

[ChatGPT](https://chat.openai.com/share/0dccacb2-ea74-415e-b049-f81f39ce9a33)

---

## 1. 问题的内容
**1.1 题目描述**：
问题来自 LeetCode，编号 369，题目名为“给单链表加一”。这个问题要求我们实现一个函数，这个函数接收一个代表非负整数的单链表的头节点，并将这个整数加一，返回结果同样以单链表的形式表达。链表中的每个节点包含一个数字，且最高位数字存储在链表的头部。

**1.2 示例**：
例如，如果输入的单链表是 `1 -> 2 -> 3`，这代表数字 123，那么在加一之后，结果应该是 `1 -> 2 -> 4`，即数字 124。如果输入的单链表是 `9 -> 9 -> 9`，代表数字 999，那么加一后的结果应该是 `1 -> 0 -> 0 -> 0`，即数字 1000。

**1.3 提示**:
- 输入的单链表代表的数字不会以 0 开始。
- 单链表中的每个节点只存储一个数字，且这个数字在 0 到 9 之间。

## 2. 边界情况和约束
### 边界情况：

1. **空链表**：虽然题目描述中没有直接提到空链表的情况，但为了使函数更加健壮，我们应该处理这种情况。空链表加一应该返回一个包含单个节点，值为1的链表。
2. **所有节点的值都为9**：这种情况是最复杂的，因为它会引起整个链表长度的增加，例如 `9 -> 9 -> 9` 加一变成 `1 -> 0 -> 0 -> 0`。
3. **链表中只有一个节点**：这是边界情况的简化版本，但仍然需要确保我们的解决方案可以正确处理。
4. **链表中的数字不需要进位**：例如 `1 -> 2 -> 3`，这是最简单的情况，只需要在链表的末尾加一。
5. **链表中的数字需要进位**：但不是所有节点的值都为9，例如 `1 -> 2 -> 9`。

### 约束条件：

1. **链表的最高位位于链表头部**：这意味着我们可能需要从链表的末尾开始向前遍历来处理进位问题，或者使用一种方式反转链表或部分链表。
2. **单个节点值的范围**：每个节点的值必须在0到9之间，包括0和9。
3. **不得修改链表节点的值**：这是一个隐含的约束，即我们应该通过操作链表的结构而不是直接修改节点的值来实现加一操作。

## 3. 算法和策略
### 步骤1：反转链表

- **目的**：由于加一操作从最低位开始，并可能导致连锁进位直至最高位，反转链表可以让我们从最低位开始处理，简化进位处理逻辑。
- **操作**：遍历原链表，将所有节点反向链接。确保能够处理空链表的情况，以及链表只有一个节点的边界情况。

### 步骤2：加一处理

- **目的**：在反转后的链表上实施加一操作，并正确处理进位。
- **操作**：
  - 初始化一个进位变量`carry`为1（因为我们是在加一）。
  - 遍历反转后的链表，对每个节点执行以下操作：
    - 计算当前节点的新值为节点值加`carry`。
    - 如果新值等于10，设置该节点的值为0，并保持`carry`为1；否则，设置该节点的值为新值，并将`carry`设置为0。
    - 如果`carry`为0，结束循环。

### 步骤3：处理所有9的情况

- **目的**：确保在所有节点的值原本都为9的情况下，能够在链表前端添加一个值为1的新节点。
- **操作**：如果遍历结束后`carry`仍然为1，这意味着链表所有节点的值都是9，需要在链表前端添加一个值为1的新节点。

### 步骤4：再次反转链表

- **目的**：将链表恢复到原始的顺序，以满足问题的输出要求。
- **操作**：重复步骤1的过程，再次反转链表。

### 步骤5：返回结果

- **操作**：返回处理后，已经恢复顺序的链表头节点。

---

