[375. 猜数字大小 II](https://leetcode.cn/problems/guess-number-higher-or-lower-ii)

[ChatGPT](https://chat.openai.com/share/c5b9002a-f8fb-4578-be58-579140c97fa9)

---

## 1. 问题的内容
**1.1 题目描述**：
LeetCode 问题 375 "猜数字大小 II" 的基本要求是找出一种猜数字游戏的最优策略，以保证无论目标数字是多少，玩家所需支付的金额总和最小。游戏规则如下：

- 游戏从 `1` 到 `n` 中选择一个数字。
- 如果你猜的数字大于目标数字，你会被告知 "更小"；如果猜的数字小于目标数字，你会被告知 "更大"。
- 当你猜中目标数字时，游戏结束。
- 每次猜错，你都需要支付猜测的数字作为罚金。
- 目标是最小化保证胜利所需支付的最大总金额。

**1.2 示例**：
例如，如果 `n = 10`，并且数字是 `8`，如果我们的猜测序列是 `1, 3, 5, 7, 9, 10, 8`，那么我们将支付 `1+3+5+7+9+10 = 35`。但是，这不是最优策略。正确的策略应该是以某种方式猜测，以最小化可能的最大支付金额。

**1.3 提示**:
- 使用动态规划来解决这个问题。可以通过考虑最坏情况下的最小代价来构建解决方案，即考虑每次猜测后游戏分为两个子问题的最小成本。
- 动态规划的状态可以定义为一个二维数组，其中 `dp[i][j]` 表示从数字 `i` 到数字 `j` 保证能赢的最小成本。
- 转移方程需要考虑选择任何一个数字作为猜测的成本，以及在最坏情况下两边的最小成本。

## 2. 边界情况和约束
- **边界情况**：如果 `n` 很小（比如 `n = 1` 或 `n = 2`），问题比较简单。对于 `n = 1`，不需要支付任何费用就能猜中数字；对于 `n = 2`，只需要支付 `1` 即可保证胜利。
- **约束**：输入的 `n` 是一个正整数，并且 `n` 的范围在动态规划解决方案中需要特别注意，以确保不会访问数组的非法索引。

## 3. 算法和策略
### 算法步骤

1. **初始化**：创建一个 `(n+1) x (n+1)` 的二维数组 `dp` 来存储从 `i` 到 `j` 猜中任何数字所需的最小成本，初值为 `0`。
2. **填表**：对于所有可能的长度（从底到上，从左到右填表），更新 `dp[i][j]` 的值，其中 `i` 为起始数字，`j` 为结束数字。
   - 对于每一对 `(i, j)`，计算在最坏情况下的最小成本，即尝试每一个可能的猜测点 `k`，并用 `k + max(dp[i][k-1], dp[k+1][j])` 来更新 `dp[i][j]`。
   - 这里，`k + max(dp[i][k-1], dp[k+1][j])` 表示如果首次猜测是 `k`，并且猜错了，我们需要支付 `k` 的成本加上左侧或右侧子问题的最大成本（因为我们考虑的是最坏情况）。
3. **最优解**：`dp[1][n]` 即为所求，代表了在最坏情况下从 `1` 到 `n` 猜中任何数字所需的最小成本。

### 策略

- 使用**自底向上**的动态规划方法填充 `dp` 数组。
- 优化：在某些情况下，可以通过分析减少不必要的比较，例如，当子问题的大小非常小（如 `j-i` 较小）时，可以直接计算结果而不是遍历所有可能的猜测点。

---