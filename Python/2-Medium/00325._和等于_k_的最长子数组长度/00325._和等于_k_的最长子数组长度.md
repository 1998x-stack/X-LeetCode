[325. 和等于 k 的最长子数组长度](https://leetcode.cn/problems/maximum-size-subarray-sum-equals-k)

[ChatGPT](https://chat.openai.com/share/49f3aac6-6b97-47b6-bbe6-ad178454959a)

---

## 1. 问题的内容
**1.1 题目描述**：
- 给定一个整数数组和一个整数 k，你需要找到该数组中和为 k 的最长连续子数组，并返回其长度。如果不存在任何这样的子数组，则返回 0。

**1.2 示例**：
- 输入: nums = [1, -1, 5, -2, 3], k = 3
- 输出: 4
- 解释: 子数组 [1, -1, 5, -2] 和为 3，并且是最长的。

**1.3 提示**:
- 数组的长度不会超过 20,000。
- 数组中的元素可能是正数、负数或 0。

## 2. 边界情况和约束
- **边界情况**:
  - 空数组：输入数组为空时，应直接返回 0。
  - 全部元素之和刚好等于 k。
  - 数组中只有一个元素，且该元素等于 k。
- **约束**:
  - 数组长度的限制，最大为 20,000，要求算法必须在合理的时间内完成计算。
  - 数组元素的多样性（正数、负数、0），这意味着简单的累加可能会出现正负抵消，需要精确控制子数组的起始和结束位置。

## 3. 算法和策略
**算法详解**:
1. 初始化一个哈希表 `prefix_sum_index` 来存储前缀和及其对应的最早出现的索引。同时，设置一个变量 `max_length` 来记录满足条件的最长子数组长度。
2. 遍历数组，计算当前的前缀和 `current_sum`。对于每一个位置 i，检查 `current_sum - k` 是否在哈希表中。
   - 如果存在，说明从哈希表中对应的索引 + 1 到当前位置 i 的子数组和为 k。更新 `max_length` 为当前子数组长度和 `max_length` 中的较大值。
3. 如果 `current_sum` 尚未在哈希表中，将其和当前索引存入哈希表。这保证了我们总是使用最长的子数组来更新 `max_length`。
4. 遍历完成后，返回 `max_length` 作为结果。

---